<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UAM maps for the ZPC &mdash; Unify Host SDK</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom_styles.css" type="text/css" />
    <link rel="canonical" href="https://siliconlabs.github.io/UnifySDK/applications/zpc/how_to_write_uam_files_for_the_zpc.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/charenc.js"></script>
        <script src="../../_static/js/crypt.js"></script>
        <script src="../../_static/js/sha1.js"></script>
        <script src="../../_static/js/html5-qrcode.min.js"></script>
        <script src="../../_static/js/qr_code_scanner.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ZPC - Z-Wave (certification) Information" href="readme_certification.html" />
    <link rel="prev" title="ZPC User’s Guide" href="readme_user.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../doc/introduction.html" class="icon icon-home"> Unify
            <img src="../../_static/silicon-labs-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                ver_1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../doc/introduction.html">Unify Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/running_unify.html">Running Unify on Raspberry Pi</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../doc/UnifySDK.html">Unify Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/unify_framework_services.html">Framework Services</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../doc/protocol_controllers.html">Protocol Controllers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../doc/protocol/zwave/zpc_introduction.html">Z-Wave (ZPC)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="readme_user.html">ZPC User’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_certification.html">ZPC - Z-Wave (certification) Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../doc/readme_debug.html">ZPC Debugging Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="how_to_implement_zwave_command_classes.html">Guideline for implementing Command Classes</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">UAM maps for the ZPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-maps">Configuring maps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-fingerprints">Device fingerprints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mapping-between-z-wave-and-dotdot">Mapping between Z-Wave and DotDot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-lifeline-association-establishment">Automatic lifeline/association establishment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-a-non-default-wake-up-interval">Configuring a non-default Wake Up Interval</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/protocol/zigbee/zigpc_introduction.html">Zigbee (ZigPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/multiprotocol.html">Multiprotocol Host Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/protocol/matter/matter_mpc.html">Matter (MPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/protocol/aox/aox_introduction.html">Bluetooth AoX (AoXPC)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/unify_iot_services.html">IoT Services</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../doc/getting_started_as_developer.html">Getting Started as a Developer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../doc/unify_specifications/index.html">Unify Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/standards/known-abbreviations.html">Known Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../doc/introduction.html">Unify</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <script>
    $(".wy-side-scroll").append("<div class='github-button'><iframe src='https://ghbtns.com/github-btn.html?user=SiliconLabs&repo=UnifySDK&type=watch&count=true&size=large&v=2' allowtransparency='true' frameborder='0' scrolling='0' width='170' height='30'></iframe></div>");
</script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="uam-maps-for-the-zpc">
<h1>UAM maps for the ZPC<a class="headerlink" href="#uam-maps-for-the-zpc" title="Permalink to this heading"></a></h1>
<section id="configuring-maps">
<h2>Configuring maps<a class="headerlink" href="#configuring-maps" title="Permalink to this heading"></a></h2>
<p>Additional maps can be added, or the existing default maps can be modified
as needed. Maps are normally used for dotdot/Z-Wave value conversion, but
they can also be used to:</p>
<ul class="simple">
<li><p>Fill device data automatically, and skip interviewing known properties</p></li>
<li><p>Configure/Set certain values automatically</p></li>
</ul>
<section id="guide-for-uam-files">
<h3>Guide for UAM files<a class="headerlink" href="#guide-for-uam-files" title="Permalink to this heading"></a></h3>
<p>Refer to <a class="reference internal" href="../../doc/how_to_write_uam_files.html"><span class="doc std std-doc">How to write UAM files</span></a></p>
</section>
<section id="attribute-types">
<h3>Attribute types<a class="headerlink" href="#attribute-types" title="Permalink to this heading"></a></h3>
<p>To configure a map, the attribute types that will be mapped must be identifed
first. Each Command Class has a set of defined attribute types that it
allocates in the attribute store under endpoints.</p>
<p>The CLI can be used on a running ZPC to print out the attribute store and
its contents. It is an easy and quick way to find out the list of
attribute types and their values for a given NodeID. For example, showing
the attribute store data for NodeID 2:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ZPC&gt;attribute_store_log NodeID,2
(305) NodeID .................................................................. 2
    │───(306) Endpoint ID ..................................................... 0
    │   │───(313) NIF ......................................................... [5e,25,26,33,70,27,32,81,85,59,72,86,7a,73,ef,5a,82]
    │   │───(315) Z-Wave Plus Info Version .................................... 2
    │   │───(316) Binary Switch Command Class version ......................... 1
    │   │───(317) Multilevel Switch Command Class version ..................... 2
    │   │───(318) ZCL Level MinLevel .......................................... 0
    │   │───(319) ZCL Level MaxLevel .......................................... 99
    │   │───(320) Color Switch Command Class version .......................... 1
    │   │───(321) Configuration Command Class version ......................... 1
    │   │───(322) Unknown 0x00002701 .......................................... [01]
    │   │───(323) Unknown 0x00003201 .......................................... [03]
    │   │───(324) Unknown 0x00008101 .......................................... [01]
    │   │───(325) Association Command Class version ........................... 2
    │   │───(326) AGI Command Class version ................................... 1
    │   │───(327) Manufacturer Specific Version ............................... 2
    │   │───(328) Version Version ............................................. 2
    │   │───(329) Firmware Update Version ..................................... 2
    │   │───(330) Powerlevel Version .......................................... 1
    │   │───(337) Binary Switch State ......................................... 0
    │   │   │───(338) Value ................................................... 255
    │   │───(339) Multilevel Switch State ..................................... 0
    │   │   │───(340) Value ................................................... 50
    │   │   │───(341) Duration ................................................ 0
    │   │   │───(342) OnOff (virtual state) ................................... 255
    │   │   │───(343) Substate update ......................................... &lt;undefined&gt; (desired: 0)
    │   │───(344) ZCL OnOff OnOff ............................................. 1
    │   │───(345) Color Switch Color component bitmask ........................ [00,1c]
    │   │───(346) Next Configuration Parameter ID ............................. 0
    │   │───(347) Configuration Bulk Support .................................. 0
</pre></div>
</div>
<section id="z-wave-attributes">
<h4>Z-Wave Attributes<a class="headerlink" href="#z-wave-attributes" title="Permalink to this heading"></a></h4>
<p>Most Z-Wave attributes types are defined in the <code class="docutils literal notranslate"><span class="pre">attribute_store_defined_attribute_types.h</span></code> header file. Most of the time,
attributes are stored directly under the endpoint. In this case, the attribute
can simply be referred to with its type.</p>
<p>For example, the Basic Value reported in the Basic Command Class is defined
here:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">///&lt; This represents the current state/value.</span>
<span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_BASIC_VALUE</span><span class="p">,</span>
<span class="w">                 </span><span class="p">((</span><span class="n">COMMAND_CLASS_BASIC</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x02</span><span class="p">))</span>
</pre></div>
</div>
<p>The value of <code class="docutils literal notranslate"><span class="pre">ATTRIBUTE_COMMAND_CLASS_BASIC_VALUE</span></code> is 8194 or (0x2002), so it
can be referred to as follow in a <code class="docutils literal notranslate"><span class="pre">uam</span></code> file:</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Z-Wave Basic value</span>
<span class="nb">def</span> <span class="no">zwBasicValue</span> <span class="no">0x2002</span>
</pre></div>
</div>
<p>Some attributes are defined as part of the auto-generated code. The list
of command classes using auto-generated code can be found in the list of
supported/controlled command classes. If a command class is auto-generated,
there will be a header file in the build folder containing attribute type
definitions. For example, for the Door Lock Command Class, refer to
<code class="docutils literal notranslate"><span class="pre">zwave_COMMAND_CLASS_DOOR_LOCK_attribute_id.h</span></code></p>
<p>When mapping, we have to be aware of the tree structure. Sometimes,
attributes are placed a few levels under the endpoint.  When this is the case,
command class handlers describe how the tree structure is organized in a
PlantUML diagram included in their header files.</p>
<p>In general, it is recommended to reuse the attribute types defined in the
existing maps, rather than investigate how attribute may be stored in the
attribute tree.</p>
</section>
<section id="dotdot-attributes">
<h4>DotDot Attributes<a class="headerlink" href="#dotdot-attributes" title="Permalink to this heading"></a></h4>
<p>Dotdot attributes are automatically determined by their Cluster ID / Attribute ID. They are in most cases placed directly under the endpoint.</p>
<p>The 32 bits values is composed by doing <code class="docutils literal notranslate"><span class="pre">cluster_id&lt;&lt;16</span> <span class="pre">+</span> <span class="pre">attribute_id</span></code>.
For example, the OnOff attribute (id = <code class="docutils literal notranslate"><span class="pre">0</span></code>) of the OnOff Cluster (id= <code class="docutils literal notranslate"><span class="pre">0x0006</span></code>) is <code class="docutils literal notranslate"><span class="pre">0x00060000</span></code>.</p>
<p>The Basic Cluster (cluster id = 0) is an exception, to avoid collisions
with Z-Wave attributes. Instead, cluster id <code class="docutils literal notranslate"><span class="pre">0xba5c</span></code> is used for the Basic
Cluster.</p>
<p>If some non-standard attributes are saved (e.g. group ID and Group names for
the group cluster, their definitions is added to
<code class="docutils literal notranslate"><span class="pre">attribute_store_defined_attribute_types.h</span></code>)</p>
</section>
</section>
</section>
<section id="device-fingerprints">
<h2>Device fingerprints<a class="headerlink" href="#device-fingerprints" title="Permalink to this heading"></a></h2>
<p>A few of the default maps give examples of device fingerprints.
It is recommended to use the Manufacturer ID, Product Type and Product ID,
as a minimum.</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Substitutions</span>
<span class="nb">def</span> <span class="no">zwMANUFACTURER_ID</span>           <span class="no">0x00007202</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_TYPE_ID</span>           <span class="no">0x00007203</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_ID</span>                <span class="no">0x00007204</span>

<span class="c c-Singleline">// Simple fingerprint</span>
<span class="nb">def</span> <span class="no">powerstrip_sample_app</span> ((<span class="nv">r&#39;zwMANUFACTURER_ID</span> <span class="ow">==</span> <span class="no">0x00</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_TYPE_ID</span> <span class="ow">==</span> <span class="no">0x04</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_ID</span> <span class="ow">==</span> <span class="no">0x05</span>))

<span class="c c-Singleline">// Set the Z-Wave Plus Info Version to 10 for PowerStrips</span>
<span class="nb">def</span> <span class="no">zw_ZWAVE_PLUS_VERSION</span> <span class="no">0x00005e02</span>

<span class="nb">scope</span> <span class="no">0</span> {
<span class="nv">r&#39;zw_ZWAVE_PLUS_VERSION</span> <span class="o">=</span>
 <span class="nb">if</span> (<span class="no">powerstrip_sample_app</span>) <span class="no">10</span>
 <span class="no">undefined</span>
}
</pre></div>
</div>
<p>A more complete fingerprint can include the version of a product, as well
as its hardware version. This is equivalent to the fingerprinting of devices
prior to perform OTA firmware updates.</p>
<p>The firmware version is stored as <code class="docutils literal notranslate"><span class="pre">(major</span> <span class="pre">&lt;&lt;</span> <span class="pre">16)</span> <span class="pre">|</span> <span class="pre">(minor</span> <span class="pre">&lt;&lt;</span> <span class="pre">8)</span> <span class="pre">|</span> <span class="pre">patch</span></code>.</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Substitutions</span>
<span class="nb">def</span> <span class="no">zwMANUFACTURER_ID</span>           <span class="no">0x00007202</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_TYPE_ID</span>           <span class="no">0x00007203</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_ID</span>                <span class="no">0x00007204</span>
<span class="nb">def</span> <span class="no">zwVERSION_REPORT</span>            <span class="no">0x00008602</span>
<span class="nb">def</span> <span class="no">zwFIRMWARE_ID</span>               <span class="no">0x00008605</span>
<span class="nb">def</span> <span class="no">zwFIRMWARE_VERSION</span>          <span class="no">0x00008606</span>
<span class="nb">def</span> <span class="no">zwHARDWARE_VERSION</span>          <span class="no">0x0000860f</span>

<span class="c c-Singleline">// Complete fingerprint</span>
<span class="nb">def</span> <span class="no">door_lock_sample_app_v10_17_0_1</span> ((<span class="nv">r&#39;zwMANUFACTURER_ID</span> <span class="ow">==</span> <span class="no">0x00</span>) <span class="ow">&amp;</span>  (<span class="nv">r&#39;zwPRODUCT_TYPE_ID</span> <span class="ow">==</span> <span class="no">0x04</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_ID</span> <span class="ow">==</span> <span class="no">0x01</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwVERSION_REPORT[1].zwFIRMWARE_ID[0].zwFIRMWARE_VERSION</span> <span class="ow">==</span> <span class="no">0x000A1100</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwVERSION_REPORT[1].zwHARDWARE_VERSION</span> <span class="ow">==</span> <span class="no">1</span>))

<span class="c c-Singleline">// Set the Z-Wave Plus Info Version to 10 for DoorLock v10.17.0 hw version 1</span>
<span class="nb">def</span> <span class="no">zw_ZWAVE_PLUS_VERSION</span> <span class="no">0x00005e02</span>

<span class="nb">scope</span> <span class="no">0</span> {
<span class="nv">r&#39;zw_ZWAVE_PLUS_VERSION</span> <span class="o">=</span>
 <span class="nb">if</span> (<span class="no">door_lock_sample_app_v10_17_0_1</span>) <span class="no">10</span>
 <span class="no">undefined</span>
}
</pre></div>
</div>
</section>
<section id="mapping-between-z-wave-and-dotdot">
<h2>Mapping between Z-Wave and DotDot<a class="headerlink" href="#mapping-between-z-wave-and-dotdot" title="Permalink to this heading"></a></h2>
<p>To establish a map that reports data on DotDot, we usually need to set
reported value of the DotDot attribute to match the reported value or the
Z-Wave Attribute.</p>
<p>DotDot attributes, once set, are detected and published automatically on MQTT.
This map will for example publish an OnOff attribute for a Binary Switch
value.</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Binary switch Command Class</span>
<span class="nb">def</span> <span class="no">zwCOMMAND_CLASS_SWITCH_BINARY_VERSION</span> <span class="no">0x2501</span>
<span class="nb">def</span> <span class="no">zwSWITCH_BINARY_STATE</span> <span class="no">0x2502</span>
<span class="nb">def</span> <span class="no">zwSWITCH_BINARY_VALUE</span> <span class="no">0x2503</span>

<span class="c c-Singleline">// OnOff Cluster</span>
<span class="nb">def</span> <span class="no">zbON_OFF_CLUSTER_SWITCH</span> <span class="no">0x00060000</span>

<span class="nb">scope</span> <span class="no">0</span> {
<span class="c c-Singleline">// Linking reported attributes zwave -&gt; zigbee</span>
<span class="nv">r&#39;zbON_OFF_CLUSTER_SWITCH</span> <span class="o">=</span> <span class="nv">r&#39;zwSWITCH_BINARY_STATE.zwSWITCH_BINARY_VALUE</span>
}
</pre></div>
</div>
<p>Given that only the reported is mapped, if an MQTT client tries to set the
DotDot OnOff attribute with a command, nothing will happen on the Z-Wave
side.</p>
<p>To make Z-Wave values updates based on DotDot commands, the desired value
change of a dotdot attribute should be mapped to an update of the desired
Z-Wave value:</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Linking desired attributes zigbee -&gt; zwave</span>
<span class="nv">d&#39;zwSWITCH_BINARY_STATE.zwSWITCH_BINARY_VALUE</span> <span class="o">=</span> <span class="nv">d&#39;zbON_OFF_CLUSTER_SWITCH</span>
</pre></div>
</div>
</section>
<section id="automatic-lifeline-association-establishment">
<h2>Automatic lifeline/association establishment<a class="headerlink" href="#automatic-lifeline-association-establishment" title="Permalink to this heading"></a></h2>
<p>The ZPC can be configured through maps to establish associations. The ZPC
associates itself whenever the AGI group profile of an association group
is set to 0x01 or 0x00.</p>
<p>If the ZPC is the SIS and the AGI profile is set to 0x0001, it will establish
an association forcefully, i.e. it will remove nodes from the association
if this group is already full to get associated itself.</p>
<p>In any other cases (ZPC is not the SIS or group profile is set to 0x0000),
the ZPC will associate itself only if there is capacity left in the
association group.</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="nb">def</span> <span class="no">zwMANUFACTURER_ID</span>           <span class="no">0x00007202</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_TYPE_ID</span>           <span class="no">0x00007203</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_ID</span>                <span class="no">0x00007204</span>

<span class="nb">def</span> <span class="no">zwASSOCIATION_GROUP_ID</span>      <span class="no">0x00008503</span>
<span class="nb">def</span> <span class="no">zwASSOCIATION_GROUP_PROFILE</span> <span class="no">0x00005904</span>

<span class="c c-Singleline">// device fingerprint</span>
<span class="nb">def</span> <span class="no">powerstrip_sample_app</span> ((<span class="nv">r&#39;zwMANUFACTURER_ID</span> <span class="ow">==</span> <span class="no">0x00</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_TYPE_ID</span> <span class="ow">==</span> <span class="no">0x04</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_ID</span> <span class="ow">==</span> <span class="no">0x05</span>))

<span class="c c-Singleline">// AGI profile value to establish an association or not.</span>
<span class="nb">def</span> <span class="no">ESTABLISH_ASSOCIATION</span> <span class="no">0x0000</span>
<span class="nb">def</span> <span class="no">ESTABLISH_LIFELINE</span>    <span class="no">0x0001</span>
<span class="nb">def</span> <span class="no">NO_LIFELINE</span>           <span class="no">0xFFFF</span>

<span class="nb">scope</span> <span class="no">0</span> {
<span class="c c-Singleline">// Establish Lifeline association for group 1:</span>
<span class="nv">r&#39;zwASSOCIATION_GROUP_ID[1].zwASSOCIATION_GROUP_PROFILE</span> <span class="o">=</span>
  <span class="nb">if</span> (<span class="no">powerstrip_sample_app</span>) <span class="no">ESTABLISH_LIFELINE</span>
  <span class="no">undefined</span>

<span class="c c-Singleline">// Establish a regular association Association Group 2 of the PowerStrip sample application</span>
<span class="nv">r&#39;zwASSOCIATION_GROUP_ID[2].zwASSOCIATION_GROUP_PROFILE</span> <span class="o">=</span>
  <span class="nb">if</span> (<span class="no">powerstrip_sample_app</span>) <span class="no">ESTABLISH_ASSOCIATION</span>
  <span class="no">undefined</span>
}
</pre></div>
</div>
</section>
<section id="configuring-a-non-default-wake-up-interval">
<h2>Configuring a non-default Wake Up Interval<a class="headerlink" href="#configuring-a-non-default-wake-up-interval" title="Permalink to this heading"></a></h2>
<p>The ZPC will perform the Wake Up interval configuration as follows:</p>
<ol class="arabic simple">
<li><p>If Wake Up on demand is supported (version 3), then the Wake Up interval will
be the maximum possible value (or 0 if supported).</p></li>
<li><p>If the Default Wake Up Interval is advertised, this value will be used</p></li>
<li><p>Else the closest supported value to the ZPC default configuration default
Wake Up interval will be used.</p></li>
</ol>
<p>UAM files can be used to override this setting for a particular device.
For example:</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Configure non-default Wake Up intervals for particular nodes.</span>
<span class="nb">def</span> <span class="no">zwMANUFACTURER_ID</span>           <span class="no">0x00007202</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_TYPE_ID</span>           <span class="no">0x00007203</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_ID</span>                <span class="no">0x00007204</span>

<span class="nb">def</span> <span class="no">WAKE_UP</span>             <span class="no">0x00008409</span>
<span class="nb">def</span> <span class="no">INTERVAL</span>            <span class="no">0x00008402</span>
<span class="nb">def</span> <span class="no">CAPABILITIES</span>        <span class="no">0x0000840A</span>
<span class="nb">def</span> <span class="no">MINIMUM_INTERVAL</span>    <span class="no">0x00008404</span>
<span class="nb">def</span> <span class="no">MAXIMUM_INTERVAL</span>    <span class="no">0x00008405</span>

<span class="c c-Singleline">// Device fingerprints</span>
<span class="nb">def</span> <span class="no">sensor_pir_sample_app</span> ((<span class="nv">r&#39;zwMANUFACTURER_ID</span> <span class="ow">==</span> <span class="no">0x00</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_TYPE_ID</span> <span class="ow">==</span> <span class="no">0x04</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_ID</span> <span class="ow">==</span> <span class="no">0x03</span>))

<span class="nb">scope</span> <span class="no">0</span> {

<span class="c c-Singleline">// SensorPIR runs with aggressive Wake Up Interval for testing purposes.</span>
<span class="nv">d&#39;WAKE_UP.INTERVAL</span> <span class="o">=</span>
  <span class="nb">if</span> (<span class="no">sensor_pir_sample_app</span>) <span class="no">20</span>
  <span class="no">undefined</span>
}
</pre></div>
</div>
<p>Values can also be taken from devices capabilities, for example here, setting
the maximum supported value:</p>
<div class="highlight-uam notranslate"><div class="highlight"><pre><span></span><span class="c c-Singleline">// Configure non-default Wake Up intervals for particular nodes.</span>
<span class="nb">def</span> <span class="no">zwMANUFACTURER_ID</span>           <span class="no">0x00007202</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_TYPE_ID</span>           <span class="no">0x00007203</span>
<span class="nb">def</span> <span class="no">zwPRODUCT_ID</span>                <span class="no">0x00007204</span>

<span class="nb">def</span> <span class="no">WAKE_UP</span>             <span class="no">0x00008409</span>
<span class="nb">def</span> <span class="no">INTERVAL</span>            <span class="no">0x00008402</span>
<span class="nb">def</span> <span class="no">CAPABILITIES</span>        <span class="no">0x0000840A</span>
<span class="nb">def</span> <span class="no">MINIMUM_INTERVAL</span>    <span class="no">0x00008404</span>
<span class="nb">def</span> <span class="no">MAXIMUM_INTERVAL</span>    <span class="no">0x00008405</span>

<span class="c c-Singleline">// Device fingerprints</span>
<span class="nb">def</span> <span class="no">sensor_pir_sample_app</span> ((<span class="nv">r&#39;zwMANUFACTURER_ID</span> <span class="ow">==</span> <span class="no">0x00</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_TYPE_ID</span> <span class="ow">==</span> <span class="no">0x04</span>) <span class="ow">&amp;</span> (<span class="nv">r&#39;zwPRODUCT_ID</span> <span class="ow">==</span> <span class="no">0x03</span>))

<span class="nb">scope</span> <span class="no">0</span> {

<span class="c c-Singleline">// Example of settting automatically to the maximum value:</span>
<span class="nv">d&#39;WAKE_UP.INTERVAL</span> <span class="o">=</span>
  <span class="nb">if</span> (<span class="no">sensor_pir_sample_app</span>) <span class="nv">r&#39;CAPABILITIES.MAXIMUM_INTERVAL</span>
  <span class="no">undefined</span>
}
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2023 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>