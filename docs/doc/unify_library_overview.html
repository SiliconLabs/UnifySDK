<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unify Library Overview &mdash; Unify Host SDK</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom_styles.css" type="text/css" />
    <link rel="canonical" href="https://siliconlabs.github.io/UnifySDK/doc/unify_library_overview.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/charenc.js"></script>
        <script src="../_static/js/crypt.js"></script>
        <script src="../_static/js/sha1.js"></script>
        <script src="../_static/js/html5-qrcode.min.js"></script>
        <script src="../_static/js/qr_code_scanner.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Unify Coding Standard" href="standards/coding-standard.html" />
    <link rel="prev" title="Unify Rust Development" href="readme_rust.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="introduction.html" class="icon icon-home"> Unify
            <img src="../_static/silicon-labs-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                ver_1.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Unify Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_unify.html">Getting Started with Unify</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="UnifySDK.html">Unify Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="unify_framework_services.html">Framework Services</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="protocol_controllers.html">Protocol Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="unify_iot_services.html">IoT Services</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="getting_started_as_developer.html">Getting Started as a Developer</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="readme_developer.html">Unify Developer Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="readme_building.html">Unify Build Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_cmake.html">CMake Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_rust.html">Unify Rust Development</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Unify Library Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#base-platform">Base Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-framework">Test Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-system">Build System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#packaging-framework">Packaging Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coding-standard">Coding Standard</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="standards/coding-standard.html">Unify Coding Standard</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html">API documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_developer.html#directory-structure-and-file-naming-conventions">Directory Structure and File Naming Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_developer.html#clang-format-autoformat-code">Clang-Format (autoformat code)</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_developer.html#pre-commit-hooks">Pre-commit Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_developer.html#creating-a-new-application">Creating a New Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_developer.html#unify-framework-library-unify-main-and-ipc">Unify Framework Library (Unify Main) and IPC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_as_developer.html#development-platform-recommendations">Development Platform Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_as_developer.html#developing-iot-services">Developing IoT Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_as_developer.html#developing-eed">Developing EED</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_as_developer.html#developing-protocol-controllers">Developing protocol controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started_as_developer.html#extend-ucl-clusters-to-non-zigbee-controllers">Extend UCL clusters to non-zigbee controllers</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="unify_specifications/index.html">Unify Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="standards/known-abbreviations.html">Known Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="introduction.html">Unify</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <script>
    $(".wy-side-scroll").append("<div class='github-button'><iframe src='https://ghbtns.com/github-btn.html?user=SiliconLabs&repo=UnifySDK&type=watch&count=true&size=large&v=2' allowtransparency='true' frameborder='0' scrolling='0' width='170' height='30'></iframe></div>");
</script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="unify-library-overview">
<h1>Unify Library Overview<a class="headerlink" href="#unify-library-overview" title="Permalink to this heading"></a></h1>
<p>This page describes the Unify Framework library. The purpose of the Unify Framework
library is to share code among the Unify components and applications developed
by Silicon Labs and to provide a platform on which Silicon Labs customers can build
their own components and applications.
Besides the obvious advantage of sharing code in terms of maintainability and
rapid development, the library will also ensure a common look and feel of the
various Unify components in terms of operation and system integration.</p>
<p>The Unify Framework Library provides the following overall features</p>
<ul class="simple">
<li><p>Base platform which provides event loop, config system and logging system.</p></li>
<li><p>Unit test framework</p></li>
<li><p>Build system with docker containers</p></li>
<li><p>Documentation framework</p></li>
<li><p>Packaging system for distributing components and basic scripts for system
integration with Debian Bookworm.</p></li>
<li><p>Coding standard</p></li>
</ul>
<p>The figure below show the meta functionality that the Unify Frameworks provides.
Other Guides related to develop</p>
<p class="plantuml">
<img src="../_images/plantuml-af03ce278c4e6fe0ddfe0a65722dd999094c9e93.png" alt="title Unify Framework packages

Package &quot;Base Platform&quot;
Package &quot;Build System&quot;
Package &quot;Test System&quot;
Package &quot;Documentation framework&quot;
Package &quot;Packaging framework&quot;
Package &quot;Coding Standard&quot;"/>
</p>
<section id="base-platform">
<h2>Base Platform<a class="headerlink" href="#base-platform" title="Permalink to this heading"></a></h2>
<p>The Base Platform provides a number of components which can be shared among Unify
applications. Applications are totally free to use a subset of these components.
but Unify applications should avoid duplicating the functionality of these Unify
components.</p>
<p>The figure below illustrates the inter dependencies between various components
in the Unify Framework Library. Each component (blue block in the figure) has a public
interface which is exported by the library.</p>
<p class="plantuml">
<img src="../_images/plantuml-6d805b93502765dff640e05c3ff64b283dfcd27c.png" alt="title Unify Platform Components

package &quot;Management helpers&quot; as management_helpers {
  component &quot;SmartStart&quot; as smartstart_management_helper
  component &quot;Node State Topic&quot; as node_state_topic_management_helper
  component &quot;Protocol Controller&quot; as protocol_controller_management_helper
  component &quot;OTA Client&quot; as ota_management_helper
}

package &quot;Attribute System&quot; as attribute_system {
  component &quot;Attribute Store&quot; as attribute_store
  component &quot;Attribute Resolver&quot; as attribute_resolver
  component &quot;Attribute Mapper&quot; as attribute_mapper
}

package &quot;DotDot components&quot; as dotdot_components {
  component &quot;DotDot Definitions&quot; as dotdot_definitions
  component &quot;DotDot MQTT&quot; as dotdot_mqtt
  component &quot;DotDot Attributes&quot; as dotdot_attributes
}

component &quot;Config System&quot; as config_system
component &quot;Logging System&quot; as log_system
component &quot;MQTT Client&quot; as mqtt_client
component &quot;Contiki&quot; as contiki
component &quot;Main Loop&quot; as main_loop
component &quot;Datastore&quot; as datastore
component &quot;Console Interface&quot;  as console_interface

main_loop -[hidden]-&gt; log_system
log_system -[hidden]-&gt; config_system

console_interface -right-&gt; main_loop
main_loop -&gt; contiki
mqtt_client -&gt; main_loop
dotdot_mqtt -left-&gt; mqtt_client
management_helpers -&gt; mqtt_client
dotdot_attributes -up-&gt; dotdot_mqtt
dotdot_attributes -down-&gt; attribute_store
attribute_store -right-&gt; datastore
attribute_resolver -u-&gt; attribute_store
attribute_mapper -u-&gt; attribute_store

attribute_system -left-&gt; contiki
mqtt_client -&gt; contiki"/>
</p>
<section id="main-loop">
<h3>Main loop<a class="headerlink" href="#main-loop" title="Permalink to this heading"></a></h3>
<p>The main loop component implements as the name hints a main loop which can be
used as the event system of a Unify application. The main loop components does not
implement the C main function itself, but has a uic_main(…) function which has
the main loop. The main loop uses the event system from the Contiki operating
system and implements a select loop that reacts on events on a set of file
descriptors. The main loop also implements a framework to initialize and
shutdown other components as well as a posix signal handler to shut down the
application in a controlled manner.</p>
<p>The main loop is hardcoded to use the config system component to parse
config options and command line arguments and the logging system printing
log messages.</p>
<p>Details on how to build a new application using the main loop component can be
found in the <a class="reference internal" href="readme_developer.html"><span class="doc std std-doc">Unify Developer guide</span></a>.</p>
<p>[Main loop API documentation](&#64;ref uic_main)</p>
</section>
<section id="config-system">
<h3>Config System<a class="headerlink" href="#config-system" title="Permalink to this heading"></a></h3>
<p>The config system implements parsing of config files and command line arguments.
All Unify applications should use the config system to present a uniform look and
feel across all applications.</p>
<p>[Config system API documentation](&#64;ref unify_config)</p>
</section>
<section id="logging-system">
<h3>Logging System<a class="headerlink" href="#logging-system" title="Permalink to this heading"></a></h3>
<p>The logging system features logging with severity level tagging and log
filtering. All Unify applications should use the logging system to present a
uniform look and feel across all applications.</p>
<p>[Logging System API documentation](&#64;ref sl_log)</p>
</section>
<section id="mqtt-client">
<h3>MQTT Client<a class="headerlink" href="#mqtt-client" title="Permalink to this heading"></a></h3>
<p>The MQTT client is build on top a Eclipse Mosquitto MQTT and handles MQTT
connection, subscribing and publishing. It implements re-connections and
caching of publish messages which has been published which the client has
been disconnected from the broker.</p>
<p>[MQTT Client API documentation](&#64;ref uic_mqtt)</p>
</section>
<section id="dotdot-components">
<h3>DotDot Components<a class="headerlink" href="#dotdot-components" title="Permalink to this heading"></a></h3>
<p>The Dotdot Components are helper components that provide definitions and ease
of use of the UCL/DotDot data model.</p>
<section id="dotdot-definitions">
<h4>DotDot Definitions<a class="headerlink" href="#dotdot-definitions" title="Permalink to this heading"></a></h4>
<p>The DotDot definitions (<em>uic_dotdot</em> component) comprises DotDot XML files as
well as a few C/C++ headers with definitions.</p>
<p>This represents the data model used between all entities in the Unify
Framework. Note that the definitions in these XML files take precedence
over examples from the
<a class="reference internal" href="unify_specifications/index.html"><span class="doc std std-doc">Unify Framework Specifications</span></a>.</p>
<p>These XML files represent ZCL/Dotdot clusters and can be split into 2 ranges:</p>
<ul class="simple">
<li><p>[0x0000…0xFBFF]: Official ZCL Clusters.</p></li>
<li><p>[0xFC00…0xFFFF]: Proprietary clusters.</p></li>
</ul>
<p>The Unify Framework added a few propritary cluster definitions. The Unify Framework uses
the [0xFC00…0xFEFF] range to add its own clusters.</p>
<p>To keep compability with subsequent Unify versions, XML files provided as
part of the Unify Library must not be modified.</p>
<p>Unify Framework users can add additional proprietary clusters
(and therefore proprietary attributes/commands) to the Unify Framework,
by adding their own XML files.</p>
<p>The range [0xFF00…0xFFFF] may be used to create new XML files. This will not be
used in subsequent release. To create a new XML file, add it in the
<em>uic_dotdot</em> component <em>dotdot-xml</em> folder. Assign a new unique Cluster ID from
the reserved range, for example using the 0xFF01 value:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;zcl:cluster</span>
<span class="w">  </span><span class="na">xmlns:zcl=</span><span class="s">&quot;http://zigbee.org/zcl/clusters&quot;</span>
<span class="w">  </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">  </span><span class="na">xmlns:type=</span><span class="s">&quot;http://zigbee.org/zcl/types&quot;</span>
<span class="w">  </span><span class="na">xmlns:xi=</span><span class="s">&quot;http://www.w3.org/2001/XInclude&quot;</span>
<span class="w">  </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://zigbee.org/zcl/clusters cluster.xsd http://zigbee.org/zcl/types type.xsd&quot;</span>
<span class="w">  </span><span class="na">id=</span><span class="s">&quot;FF01&quot;</span><span class="w"> </span><span class="na">revision=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ExampleApplicationCluster&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;classification</span><span class="w"> </span><span class="na">role=</span><span class="s">&quot;application&quot;</span><span class="w"> </span><span class="na">picsCode=</span><span class="s">&quot;EAC&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Finally, add it to the list in the <code class="docutils literal notranslate"><span class="pre">library.xml</span></code> file.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&lt;xi:include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;ExampleApplicationCluster.xml&quot;</span><span class="w"> </span><span class="na">parse=</span><span class="s">&quot;xml&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Building the Unify library will use the new XML definitions and provide
automatically a comprehensive set of APIs enabling the use of the new cluster
immediately by components and applications using the Unify library or
derived DotDot Components.</p>
</section>
<section id="dotdot-attributes">
<h4>DotDot Attributes<a class="headerlink" href="#dotdot-attributes" title="Permalink to this heading"></a></h4>
<p>The DotDot attribute are helper functions that will register the properties of
all existing UCL / DotDot attribute to the Attribute Store.</p>
</section>
<section id="dotdot-mqtt">
<h4>DotDot MQTT<a class="headerlink" href="#dotdot-mqtt" title="Permalink to this heading"></a></h4>
<p>This components will automatically publish MQTT messages based on changes in the
Attribute Store DotDot attributes and handles write MQTT messages and update
the Attribute Store accordingly.</p>
<p><a class="reference internal" href="api.html"><span class="doc std std-doc">DotDot Attributes API</span></a></p>
</section>
</section>
<section id="datastore">
<h3>Datastore<a class="headerlink" href="#datastore" title="Permalink to this heading"></a></h3>
<p>The Datastore is a generic data store that stores key-value pairs in an SQLite
database. The Datastore is also used by the Attribute System to store data in a
tree structure.</p>
<p>[Datastore API documentation](&#64;ref datastore)</p>
</section>
<section id="attribute-store">
<h3>Attribute Store<a class="headerlink" href="#attribute-store" title="Permalink to this heading"></a></h3>
<p>The Attribute Store provides an interface for reading and writing attributes
of any data type in a tree structure, representing the state of the network.</p>
<p>[Attribute Store API documentation](&#64;ref attribute_store)</p>
</section>
<section id="attribute-mapper">
<h3>Attribute Mapper<a class="headerlink" href="#attribute-mapper" title="Permalink to this heading"></a></h3>
<p>Attribute Mapper is a component that offers a text file based system
that allows to define Attribute relations, allowing automatic rules and
attribute manipulations using assignments based on text script files.
The attribute mapper is able to map attributes in the Attribute System to each
other. The mapper is using UAM grammar to perform the mapping. Complex
mappings are supported, where one attribute might depend on multiple other
attributes. Detailed information about Mapper component is documented in
<a class="reference internal" href="attribute_mapper_overview.html"><span class="doc std std-doc">Attribute Mapper Documentation</span></a></p>
</section>
<section id="attribute-resolver">
<h3>Attribute Resolver<a class="headerlink" href="#attribute-resolver" title="Permalink to this heading"></a></h3>
<p>The Attribute Resolver is a frame generator that uses functions registered
for attribute types. It will arbitrate when to create and schedule frames
for a given node interacting with the Attribute Store.</p>
</section>
<section id="console-interface">
<h3>Console Interface<a class="headerlink" href="#console-interface" title="Permalink to this heading"></a></h3>
<p>The Console Interface serves as an optional debugging interface to the Unify
components. It features help menus and auto completion.</p>
<p>[Console Interface API documentation ](&#64;ref uic_stdin)</p>
</section>
<section id="attribute-poll">
<h3>Attribute Poll<a class="headerlink" href="#attribute-poll" title="Permalink to this heading"></a></h3>
<p>The Attribute Poll component is a component that help undefine the values
of attributes periodically, so that they are requested again to PAN nodes and
the network information is kept as accurate as possible.</p>
</section>
<section id="smartstart">
<h3>SmartStart<a class="headerlink" href="#smartstart" title="Permalink to this heading"></a></h3>
<p>The SmartStart component is a common component that subscribes to the
SmartStart UCL topic and can be used by a Protocol Controller to check if a
given node is in the SmartStart list. The SmartStart component is also
responsible for publishing changes to the SmartStart list on node add and
remove events.</p>
</section>
<section id="node-state-topic">
<h3>Node State Topic<a class="headerlink" href="#node-state-topic" title="Permalink to this heading"></a></h3>
<p>The role of the Network Monitor is to keep track of the network state and in
particular the node states.</p>
<p>The Network Monitor react to node add / remove events from the a Protocol Controller
component and insert nodes in the attributes system. Periodically the network
monitor will check if nodes are responsive and update their states accordingly.
At boot the Network Monitor will check if the node list reported by the
controller matches the data in the Attribute System. If a mismatch is found the
the Attribute Store is updated by deleting or inserting nodes. The attribute
resolver will make sure to resolve newly added nodes.</p>
</section>
<section id="ota-mqtt-client">
<h3>OTA MQTT Client<a class="headerlink" href="#ota-mqtt-client" title="Permalink to this heading"></a></h3>
<p>This component handles OTA related MQTT topics that are used to announces OTA
images availability and OTA status.</p>
</section>
</section>
<section id="test-framework">
<h2>Test Framework<a class="headerlink" href="#test-framework" title="Permalink to this heading"></a></h2>
<p>The Test Framework consists of the <em>Throw the Switch Unity</em> and
<em>Throw the Switch CMOCK</em> frameworks for making unit tests and mocks.
The two libraries has been integrated into the cmake build system and provides
automatic mock generation for C header files.</p>
<p>See <a class="reference internal" href="readme_developer.html"><span class="doc std std-doc">Developer documentation.</span></a></p>
</section>
<section id="build-system">
<h2>Build System<a class="headerlink" href="#build-system" title="Permalink to this heading"></a></h2>
<p>The Unify Framework Library provides a Build System based on the CMAKE build system.
Various cmake macros has been defined for making mocks, unit tests and packages.</p>
<p>See <a class="reference internal" href="readme_developer.html"><span class="doc std std-doc">Developer documentation.</span></a></p>
</section>
<section id="packaging-framework">
<h2>Packaging Framework<a class="headerlink" href="#packaging-framework" title="Permalink to this heading"></a></h2>
<p>The Packaging Framework supports Debian and cmake scripts which facilitates
packaging of Unify components.</p>
</section>
<section id="coding-standard">
<h2>Coding Standard<a class="headerlink" href="#coding-standard" title="Permalink to this heading"></a></h2>
<p>All Unify component should adhere to a common coding standard.</p>
<p>See the <a class="reference internal" href="standards/coding-standard.html"><span class="doc std std-doc">Unify Coding Standard</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2023 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>